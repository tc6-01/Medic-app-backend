{"version":3,"file":"static/js/878.f08a5e61.chunk.js","mappings":"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","sources":["states/page/file-share/sharedbyme/index.ts","components/file-share/shared-by-me/ShredByMeFileOperationMenu/index.tsx","components/file-share/shared-by-me/SharedByMe.tsx","pages/file-share/SharedByMe.tsx"],"sourcesContent":["import { ConfirmDeleteDialogStore } from 'src/states/common/ConfirmDeleteDialogStore'\nimport { LoadingStore } from 'src/states/common/LoadingStore'\nimport { Dispatch, SetStateAction, useState } from 'react'\nimport { useStore } from 'reto'\nimport { PolicySelectData } from 'src/types/models/DataModels'\nimport { Tunnel } from 'src/service/models'\nimport { SharedFile } from 'src/service/medic'\n\ntype SnackBarType = 'success' | 'error' | 'warning' | 'info'\n\n// 新建数据通道\nexport interface SharedByMeStates {\n  files: SharedFile[]\n}\n\nexport interface SharedByMeStore\n  extends SharedByMeStates,\n  LoadingStore {\n  setFiles: Dispatch<SetStateAction<any[]>>\n}\n\nexport function SharedByMeStore(): SharedByMeStore {\n  const loadingStore = useStore(LoadingStore)\n  const confirmDeleteDialogStore = useStore(ConfirmDeleteDialogStore)\n  const [files, setFiles] = useState<any[]>([])\n  return {\n    ...loadingStore,\n    ...confirmDeleteDialogStore,\n    files,\n    setFiles\n  }\n}\n","import Section from 'src/components/common/Section';\nimport SimpleFileItem from 'src/components/common/SimpleFileItem';\nimport VerticalList from 'src/components/common/VerticalList';\nimport { Box, Stack } from '@mui/material';\nimport { FileListProps, FileOperationMenuProps } from '../../../../types/ComponentProps';\nimport OperationItem from 'src/components/common/OperationItem';\nimport { FolderArrowUp } from 'mdi-material-ui';\nimport { Delete, ErrorOutline, Share } from '@material-ui/icons';\n\n\n\nconst ShredByMeFileOperationMenu = ({ fileName, onOperationClicked }: FileOperationMenuProps) => {\n    return (\n        <Stack m={1}>\n            <Box borderRadius={3}>\n                <SimpleFileItem fileName={fileName} />\n                <Section title='文件操作'>\n                    <VerticalList items={[\n                        <OperationItem icon={<FolderArrowUp fontSize='large' />} name={'打开'} onclick={() => onOperationClicked('open')} />,\n                        // <OperationItem icon={<Share fontSize='large' />} name={'共享'} onclick={() => onOperationClicked('share')} />,\n                        <OperationItem icon={<Delete fontSize='large' />} name={'删除'} onclick={() => onOperationClicked('delete')} />\n                    ]} />\n                </Section>\n                <Section title='更多操作'>\n                    <VerticalList items={[\n                        <OperationItem icon={<ErrorOutline fontSize='large' />} name={'详细信息'} onclick={() => onOperationClicked('detail')} />\n                    ]} />\n                </Section>\n            </Box>\n\n        </Stack>\n    )\n\n}\n\n\nexport default ShredByMeFileOperationMenu\n","import { useEffect } from \"react\"\nimport { useNavigate } from \"react-router\"\nimport { getPolicies } from \"src/service/policyApi\"\nimport FileItem from \"../../common/FileItem\"\nimport VerticalList from \"../../common/VerticalList\"\nimport { useStore } from 'reto';\nimport { SharedByMeStore } from \"src/states/page/file-share/sharedbyme\"\nimport FileState from \"src/components/common/FileState\"\nimport { BottomDrawerStore } from '../../../states/global/BottomDrawerStore';\nimport FileOperationMenu from \"./ShredByMeFileOperationMenu\"\nimport ShredByMeFileOperationMenu from \"./ShredByMeFileOperationMenu\"\nimport { Box, Fade } from \"@mui/material\"\nimport { FileToFileItemData, SharedFileToFileItemData, getFileList, myShareFile } from \"src/service/medic\"\nimport { toLocalTimeString } from \"src/utils/time\"\nimport { sizeToString } from \"src/utils/sizeToString\"\nimport { shareFile } from '../../../service/medic';\n\nconst SharedByMeWrapper = () => {\n  const navi = useNavigate()\n  const states = useStore(SharedByMeStore)\n  const bottomeDrawerStates = useStore(BottomDrawerStore)\n  useEffect(() => {\n    myShareFile().then(res => {\n      if (res && res.code === 0) {\n        if (Array.isArray(res.data)) {\n          states.setFiles(res.data)\n          states.setLoading(false)\n        } else {\n          states.setFiles([res.data])\n        }\n      }\n    })\n  }, [])\n\n  const handleFileOperation = (ty: any, index: number) => {\n    switch (ty) {\n      case 'delete':\n        console.log('delete files at index', index);\n        break;\n      case 'open':\n        bottomeDrawerStates.setBottomDrawerOpen(false)\n        console.log(states.files)\n        navi('/pdfpreview', { state: SharedFileToFileItemData(index, states.files[index]) })//传入Id值\n        break;\n        break;\n      case 'share':\n        console.log('share files at index', index);\n        break;\n      case 'detail':\n        console.log('detail files at index', index);\n        break;\n    }\n  }\n  const onOperationClicked = (index: number) => {\n    bottomeDrawerStates.setBottomDrawerOpen(true)\n    bottomeDrawerStates.setBottomDrawerContent(\n      <ShredByMeFileOperationMenu fileName={states.files[index].fileName} onOperationClicked={(ty) => handleFileOperation(ty, index)} />\n    )\n  }\n\n  return (\n    <Fade in={true}>\n      <Box>\n        <VerticalList items={states.files?.map((SharedItems, index) => {\n          return <FileItem\n            key={index}\n            fileName={SharedItems.fileName}\n            fileTime={toLocalTimeString(SharedItems.expire)}\n            fileSize={\"100\"}\n            sharedContent={<FileState state={'shared'} />}\n            onOperationClicked={() => onOperationClicked(index)} />\n        })} onItemClicked={onOperationClicked} />\n      </Box>\n    </Fade>\n  )\n}\nexport default SharedByMeWrapper\n","import SharedByMeWrapper from '../../components/file-share/shared-by-me/SharedByMe';\nimport { Provider } from 'reto';\nimport { SharedByMeStore } from 'src/states/page/file-share/sharedbyme';\nconst SharedByMePage = () => {\n    return (\n        <Provider of={SharedByMeStore}>\n            <SharedByMeWrapper />\n        </Provider>\n    )\n}\n\nexport default SharedByMePage\n"],"names":["SharedByMeStore","loadingStore","useStore","LoadingStore","confirmDeleteDialogStore","ConfirmDeleteDialogStore","useState","files","setFiles","fileName","onOperationClicked","Stack","m","Box","borderRadius","SimpleFileItem","Section","title","VerticalList","items","OperationItem","icon","FolderArrowUp","fontSize","name","onclick","Delete","ErrorOutline","navi","useNavigate","states","bottomeDrawerStates","BottomDrawerStore","useEffect","myShareFile","then","res","code","Array","isArray","data","setLoading","index","setBottomDrawerOpen","setBottomDrawerContent","ty","console","log","state","SharedFileToFileItemData","handleFileOperation","Fade","in","map","SharedItems","FileItem","fileTime","toLocalTimeString","expire","fileSize","sharedContent","FileState","onItemClicked","of","SharedByMe"],"sourceRoot":""}